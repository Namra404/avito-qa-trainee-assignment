# Avito QA Internship - API Autotests (pytest)

Репозиторий содержит:
- тест-кейсы: `TESTCASES.md`
- автотесты для API микросервиса объявлений
- баг-репорты: `BUGS.md`

**baseUrl:** `https://qa-internship.avito.com`

---

Микросервис предоставляет ручки:

### v1
- `POST /api/1/item` - создать объявление
- `GET /api/1/item/{id}` - получить объявление по id
- `GET /api/1/{sellerID}/item` - получить объявления продавца
- `GET /api/1/statistic/{itemId}` - получить статистику по id объявления

### v2
- `DELETE /api/2/item/{id}` - удалить объявление
- `GET /api/2/statistic/{itemId}` - статистика v2

---

## Структура проекта

```
avito-qa-trainee-assignment/
│
├── test_task_1/                    # папка 1 задания
│   ├── images/                     # папка со скриншотами багов
│   └── BUGS_TASK1.md               # файл с описанием багов для задания 1
│
├── test_task_2_1/                  # папка 2 задания
│   ├── images/                     # папка со скриншотами багов
│   │
│   ├── tests/                      # папка с автотестами для разных версий api
│   │   ├── v1/                     # тесты для API v1
│   │   │   ├── test_v1_get_item_by_id.py      # тесты ручки GET item по id
│   │   │   ├── test_v1_get_seller_items.py    # тесты ручки GET items продавца
│   │   │   ├── test_v1_get_statistic.py       # тесты ручки GET статистики (v1)
│   │   │   └── test_v1_post_item.py           # тесты ручки POST создание item (v1)
│   │   │
│   │   ├── v2/                     # тесты для API v2
│   │   │   ├── test_v2_delete_item.py         # тесты ручки DELETE item (v2)
│   │   │   └── test_v2_get_statistic.py       # тесты ручки GET статистики (v2)
│   │   │
│   │   └── conftest.py             # общие фикстуры
│   │
│   ├── utils/                      # вспомогательные модули для тестов
│   │   ├── client.py               # HTTP-клиент для тестов
│   │   ├── endpoints.py            # константы эндпоинтов API
│   │   └── errors_asserts.py       # общие проверки ошибок (валидация контрактов)
│   │
│   ├── BUGS.md                     # файл с описанием найденных багов для задания 2
│   └── TESTCASES.md                # тест-кейсы к 2 заданию
│
├── .env                             # файл окружения
├── pytest.ini                      # конфиг pytest (кастоменые марки positive и negative)
├── README.md                       # README
└── requirements.txt                # зависимости

```

## Установка и запуск

### 1) Клонирование
```
git clone https://github.com/Namra404/avito-qa-trainee-assignment.git
```
###  Убедитесь, что на вашем компьютере установлен Python. В командной строке/терминале выполните команду
```
python --version 
```
Если он не установлен, то установите с официального [сайта Python](https://www.python.org/downloads/), выбрав подходящую версию для вашей операционной системы, и пройдите шаг сначала. В процессе установки обязательно поставьте галочку в чекбоксе "Add python.exe to PATH". 

###  2) Через командную строку/терминал перейдите в корневую директорию проекта, выполнив команду
```
cd /здесь укажите путь до директории с проектом  
```

### 3) Установите необходимые зависимости из файла requirements.txt, выполнив команду

pip install -r requirements.txt  

если она не выполняется, то попробуйте

pip3 install -r requirements.txt  


### 4) Настройка BASE_URL

Введите `BASE_URL` в .env.

> Если `BASE_URL` не задан - тесты упадут с ошибкой.

### 5) Запуск тестов
``` 
pytest -v
```
---
## Почему часть тестов помечена xfail

Некоторые проверки помечены `@pytest.mark.xfail(...)`.

Это значит:
- по тест-кейсу/контракту ожидается одно поведение, но на стенде наблюдается другое,  чтобы выполнить требование из Задания `“все тесты должны быть пройдены”`, такие кейсы я пометил как xfail.

---
